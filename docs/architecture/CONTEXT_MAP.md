# 컨텍스트 맵

## 컨텍스트 간 관계 유형

### 1. 파트너십 (Partnership)
- **자산 관리 ↔ 분석 엔진**
- 양방향 의존성
- 동기화된 개발 필요
- 강한 일관성 요구
- 통신 방식: 동기 + 이벤트
- 데이터 공유: 실시간

### 2. 공유 커널 (Shared Kernel)
- **자산 관리 ↔ 데이터 수집**
- 공통 도메인 모델 공유
- 시장 데이터 스키마
- 가격 정보 구조
- 통신 방식: 동기
- 데이터 공유: 실시간

### 3. 고객-공급자 (Customer-Supplier)

#### 상류 컨텍스트 (Upstream)
1. **데이터 수집**
- 시장 데이터 제공
- API 계약 관리
- 데이터 품질 보장

2. **자산 관리**
- 포트폴리오 데이터 제공
- 거래 이벤트 발행
- 자산 상태 관리

#### 하류 컨텍스트 (Downstream)
1. **시각화**
- 데이터 구독
- 표시 형식 변환
- 캐시 관리

2. **모니터링**
- 메트릭 수집
- 상태 모니터링
- 알림 처리

### 4. 준수자 (Conformist)
- **게이미피케이션 → 자산 관리**
- 자산 관리의 모델 준수
- 단방향 의존성
- 이벤트 구독

## 통신 패턴

### 1. 동기 통신
- **필수적 동기화**
- 자산 관리 ↔ 분석 엔진
- 데이터 수집 ↔ 자산 관리
- 통신 방식: gRPC
- 타임아웃 처리
- 재시도 정책

### 2. 비동기 통신
- **이벤트 기반**
- 모든 도메인 간
- 이벤트 버스 사용
- 메시지 큐 활용
- 실패 처리
- 순서 보장

### 3. 하이브리드
- **복합 패턴**
- 자산 관리 → 시각화
- 초기: 동기 로드
- 갱신: 이벤트
- 캐시 활용

## 데이터 모델

### 1. 공유 모델
- **핵심 개념**
- Asset
- Portfolio
- Transaction
- TimeSeriesData

### 2. 변환 모델
- **컨텍스트별 변환**
- 분석용 모델
- 시각화용 모델
- 모니터링용 모델

### 3. 반부패 계층 (Anti-Corruption Layer)
- **컨텍스트 보호**
- 외부 시스템 통합
- 레거시 시스템 통합
- 모델 변환

## 구현 가이드라인

### 1. 경계 정의
- 명확한 컨텍스트 경계
- API 버전 관리
- 문서화 요구사항

### 2. 통신 규약
- API 형식
- 에러 처리
- 재시도 정책
- 타임아웃 설정

### 3. 데이터 동기화
- 일관성 수준
- 캐시 전략
- 충돌 해결

### 4. 모니터링
- 통신 상태
- 성능 메트릭
- 에러 추적

## 진화 전략

### 1. 단계적 구현
1. 핵심 컨텍스트
- 자산 관리
- 분석 엔진
- 데이터 수집

2. 지원 컨텍스트
- 시각화
- 모니터링
- 게이미피케이션

### 2. 통합 전략
1. 초기 통합
- 핵심 기능 중심
- 단순 통신 패턴
- 기본 일관성

2. 고도화
- 고급 기능 추가
- 복잡한 통신 패턴
- 강화된 일관성

### 3. 확장 계획
1. 수평적 확장
- 서비스별 확장
- 로드 밸런싱
- 샤딩 전략

2. 수직적 확장
- 기능 고도화
- 성능 최적화
- 새로운 기능
# 할 일 목록

## 현재 진행 중인 작업 (In Progress)

### 1. Value Objects 구현 (P0)
- [x] Percentage Value Object
- [x] 기본 구조 정의
- [x] 유효성 검증
- [x] 연산 메서드 구현
- [x] 테스트 코드 작성
- [ ] TimeRange Value Object
- [ ] 기본 구조 정의
- [ ] 기간 계산 메서드
- [ ] 유효성 검증
- [ ] 테스트 코드 작성
- [ ] MetricValue Value Object
- [ ] 기본 구조 정의
- [ ] 메트릭 타입별 처리
- [ ] 레이블 관리
- [ ] 테스트 코드 작성

### 2. Aggregates 정의 및 구현 (P0)
- [ ] Analysis Aggregate
- [ ] 기본 구조 정의
- [ ] 도메인 이벤트 정의
- [ ] 레포지토리 인터페이스
- [ ] 테스트 코드 작성
- [ ] Monitoring Aggregate
- [ ] 기본 구조 정의
- [ ] 알림 규칙 관리
- [ ] 메트릭 수집 정책
- [ ] 테스트 코드 작성

### 3. 이벤트 시스템 완성 (P0)
- [ ] 이벤트 저장소
- [ ] 저장소 인터페이스 정의
- [ ] 인메모리 구현
- [ ] 영속성 구현
- [ ] 테스트 코드 작성
- [ ] 이벤트 발행/구독
- [ ] 발행자 인터페이스 개선
- [ ] 구독자 패턴 구현
- [ ] 이벤트 라우팅
- [ ] 테스트 코드 작성

## 다음 단계 작업 (Next Up)

### 1. 저장소 구현 (P1)
- [ ] MongoDB 저장소
- [ ] 연결 관리
- [ ] CRUD 작업
- [ ] 트랜잭션 관리
- [ ] 테스트 코드
- [ ] InfluxDB 저장소
- [ ] 시계열 데이터 관리
- [ ] 메트릭 저장
- [ ] 쿼리 최적화
- [ ] 테스트 코드
- [ ] Redis 캐시
- [ ] 캐시 정책
- [ ] 데이터 동기화
- [ ] 만료 관리
- [ ] 테스트 코드

### 2. 메시징 시스템 (P1)
- [ ] Kafka 연동
- [ ] 프로듀서 구현
- [ ] 컨슈머 구현
- [ ] 토픽 관리
- [ ] 테스트 코드
- [ ] 메시지 처리
- [ ] 직렬화/역직렬화
- [ ] 스키마 관리
- [ ] 에러 처리
- [ ] 테스트 코드

### 3. API 게이트웨이 (P1)
- [ ] 라우팅
- [ ] 엔드포인트 정의
- [ ] 서비스 디스커버리
- [ ] 로드 밸런싱
- [ ] 테스트 코드
- [ ] 보안
- [ ] 인증 미들웨어
- [ ] 인가 처리
- [ ] 속도 제한
- [ ] 테스트 코드

## 향후 작업 (Future)

### 1. 서비스별 API 구현 (P2)
- [ ] Asset 서비스 API
- [ ] Monitoring 서비스 API
- [ ] Analysis 서비스 API
- [ ] Data Collection 서비스 API

### 2. 프론트엔드 통합 (P2)
- [ ] API 클라이언트
- [ ] 실시간 업데이트
- [ ] 차트 컴포넌트
- [ ] 대시보드 UI

### 3. 운영 도구 (P2)
- [ ] 로깅 시스템
- [ ] 모니터링 대시보드
- [ ] 배포 파이프라인
- [ ] 백업 시스템

## 코드베이스 개선 작업 (P0)

1. [ ] 이벤트 시스템 통합 및 개선
    - [ ] 중복된 이벤트 코드 통합
        - [ ] `internal/domain/event.go` 제거
        - [ ] `internal/infrastructure/events/event.go` 리팩토링
        - [ ] `internal/domain/event/event.go` 개선
    - [ ] 이벤트 핸들링 시스템 개선
        - [ ] 이벤트 발행자(Publisher) 인터페이스 개선
        - [ ] 이벤트 구독자(Subscriber) 패턴 구현
        - [ ] 이벤트 저장소 구현
    - [ ] 이벤트 테스트 코드 보강
        - [ ] 이벤트 발행 테스트
        - [ ] 이벤트 구독 테스트
        - [ ] 이벤트 저장소 테스트

2. [ ] 도메인 모델 캡슐화 강화
    - [ ] Asset 도메인 모델 개선
        - [ ] public 필드를 private로 변경
        - [ ] getter/setter 메서드 구현
        - [ ] 불변성 보장 메커니즘 추가
    - [ ] Transaction 도메인 모델 개선
        - [ ] public 필드를 private로 변경
        - [ ] 검증 로직 강화
        - [ ] 불변 속성 보장
    - [ ] Portfolio 도메인 모델 개선
        - [ ] public 필드를 private로 변경
        - [ ] 포트폴리오 규칙 검증 강화
        - [ ] 자산 할당 로직 개선

3. [ ] Repository 인터페이스 개선
    - [ ] 공통 Repository 인터페이스 정의
        - [ ] 기본 CRUD 작업 정의
        - [ ] 페이지네이션 지원 추가
        - [ ] 필터링 기능 추가
    - [ ] 도메인별 Repository 리팩토링
        - [ ] Asset Repository 개선
        - [ ] Transaction Repository 개선
        - [ ] Portfolio Repository 개선
    - [ ] 테스트 보강
        - [ ] Repository 모킹 개선
        - [ ] 통합 테스트 추가

4. [ ] 의존성 주입 시스템 개선
    - [ ] DI 컨테이너 개선
        - [ ] 순환 의존성 감지 추가
        - [ ] 스코프 관리 기능 추가
        - [ ] 지연 초기화 지원
    - [ ] 서비스 등록 시스템 구현
        - [ ] 자동 와이어링 지원
        - [ ] 조건부 의존성 지원
    - [ ] 테스트 환경 DI 지원
        - [ ] 테스트용 컨테이너 구현
        - [ ] 목 객체 자동 주입

5. [ ] 에러 처리 시스템 표준화
    - [ ] 도메인 에러 시스템 개선
        - [ ] 에러 코드 정의
        - [ ] 에러 메시지 표준화
        - [ ] 다국어 지원 추가
    - [ ] 에러 처리 미들웨어 구현
        - [ ] 에러 로깅 강화
        - [ ] 사용자 친화적 에러 응답
        - [ ] 디버그 정보 포함 옵션
    - [ ] 테스트 케이스 보강
        - [ ] 에러 시나리오 테스트
        - [ ] 에러 변환 테스트

6. [ ] 설정 관리 시스템 개선
    - [ ] 환경변수 기반 설정
        - [ ] 환경변수 매핑 구현
        - [ ] 기본값 처리 개선
        - [ ] 유효성 검증 추가
    - [ ] 설정 파일 지원
        - [ ] YAML 설정 파일 지원
        - [ ] 환경별 설정 분리
        - [ ] 설정 재로딩 지원
    - [ ] 설정 검증 시스템
        - [ ] 필수 설정 검증
        - [ ] 타입 검증
        - [ ] 의존성 검증

7. [ ] 테스트 구조 개선
    - [ ] 테스트 유틸리티 패키지 생성
        - [ ] 테스트 헬퍼 함수 구현
        - [ ] 테스트 데이터 생성기
        - [ ] 테스트 어설션 유틸리티
    - [ ] 목 객체 시스템 개선
        - [ ] 목 생성 헬퍼
        - [ ] 행위 검증 지원
        - [ ] 시나리오 테스트 지원
    - [ ] 통합 테스트 프레임워크
        - [ ] 컨테이너 기반 테스트
        - [ ] 데이터베이스 테스트
        - [ ] API 테스트

8. [ ] 모니터링 서비스 아키텍처 개선
    - [ ] 서비스 분리
        - [ ] 독립적인 서비스 구조 설계
        - [ ] 이벤트 기반 통신 구현
        - [ ] 메트릭 수집 개선
    - [ ] 알림 시스템 개선
        - [ ] 알림 규칙 엔진 구현
        - [ ] 알림 채널 다양화
        - [ ] 알림 템플릿 시스템
    - [ ] 대시보드 시스템
        - [ ] 메트릭 시각화
        - [ ] 실시간 모니터링
        - [ ] 커스텀 대시보드

9. [ ] API 응답 표준화
    - [ ] 공통 응답 구조체 정의
        - [ ] 성공 응답 포맷
        - [ ] 에러 응답 포맷
        - [ ] 메타데이터 포맷
    - [ ] 응답 변환 시스템
        - [ ] DTO 변환 레이어
        - [ ] 응답 필터링
        - [ ] HATEOAS 지원
    - [ ] API 문서화 개선
        - [ ] OpenAPI 스펙 생성
        - [ ] 예제 추가
        - [ ] 스키마 검증

10. [ ] 로깅 시스템 개선
    - [ ] 구조화된 로깅 도입
        - [ ] Zerolog 통합
        - [ ] 로그 레벨 관리
        - [ ] 컨텍스트 기반 로깅
    - [ ] 로그 수집 시스템
        - [ ] 로그 집중화
        - [ ] 로그 인덱싱
        - [ ] 로그 검색
    - [ ] 로그 모니터링
        - [ ] 로그 기반 알림
        - [ ] 로그 분석
        - [ ] 로그 시각화

## 우선순위 높음 (P0)
1. [x] 도메인 이벤트 스토밍 진행
   - [x] 핵심 도메인 이벤트 식별
   - [x] 커맨드와 액터 정의
   - [x] 애그리게잇 경계 설정

2. [x] 초기 프로젝트 설정
   - [x] Go 모듈 초기화
   - [x] 기본 디렉토리 구조 설정
   - [x] 의존성 관리 설정
   - [x] 코드 품질 도구 설정 (golangci-lint)

3. [ ] 레포지토리 패턴 재구현
   - [x] 제네릭 기반 기본 Repository 인터페이스 정의
   - [x] Asset 도메인 레포지토리 리팩토링
   - [x] ID 생성기 구현
     - [x] UUID 기반 ID 생성 유틸리티 작성
     - [x] ID 생성 테스트 코드 작성
   - [x] 테스트 픽스처 구현
     - [x] Asset 테스트 데이터 정의
     - [x] Transaction 테스트 데이터 정의
     - [x] Portfolio 테스트 데이터 정의
   - [ ] 인메모리 레포지토리 구현 (테스트용)
     - [ ] Asset 인메모리 레포지토리
     - [ ] Transaction 인메모리 레포지토리
     - [ ] Portfolio 인메모리 레포지토리

4. [ ] Value Object 구현
- [ ] Money Value Object 구현
- 기본 구조 정의
- 통화 관리 기능 구현
- 연산 메서드 구현 (Add, Subtract, Multiply)
- 통화 변환 기능 구현
- 테스트 코드 작성

- [ ] Date Value Object 구현
- 기본 구조 정의
- 날짜 연산 메서드 구현
- 날짜 비교 메서드 구현
- 포맷팅 기능 구현
- 테스트 코드 작성

5. [ ] Entity 보완
   - [ ] Asset Entity
     - [ ] Money Value Object 통합
     - [ ] 유효성 검증 추가
     - [ ] 도메인 이벤트 발행 구현
   - [ ] Transaction Entity
     - [ ] Money Value Object 통합
     - [ ] 유효성 검증 추가
     - [ ] 도메인 이벤트 발행 구현
   - [ ] Portfolio Entity
     - [ ] Percentage Value Object 통합
     - [ ] 유효성 검증 추가
     - [ ] 도메인 이벤트 발행 구현

6. [ ] 도메인 서비스 구현
   - [ ] PortfolioBalanceService
     - [ ] 포트폴리오 밸런싱 로직 구현
     - [ ] 리밸런싱 필요성 계산
     - [ ] 리밸런싱 제안 생성
   - [ ] AssetValuationService
     - [ ] 자산 가치 평가 로직 구현
     - [ ] 시장 데이터 연동 구조 설계
     - [ ] 가치 변동 추적 구현
   - [ ] TransactionValidationService
     - [ ] 거래 유효성 검증 규칙 구현
     - [ ] 예산 제한 검증
     - [ ] 이상 거래 감지

## 우선순위 중간 (P1)
1. [ ] 인프라스트럭처 레이어 구현
   - [ ] MongoDB 연결 설정
   - [ ] MongoDB 레포지토리 구현
   - [ ] 트랜잭션 관리자 구현
   - [ ] 에러 핸들링 구현

2. [ ] 애플리케이션 레이어 구현
   - [ ] UseCase 인터페이스 정의
   - [ ] Asset 관련 UseCase 구현
     - [ ] CreateAssetUseCase
     - [ ] UpdateAssetUseCase
     - [ ] DeleteAssetUseCase
   - [ ] Transaction 관련 UseCase 구현
     - [ ] RecordTransactionUseCase
     - [ ] UpdateTransactionUseCase
   - [ ] Portfolio 관련 UseCase 구현
     - [ ] CreatePortfolioUseCase
     - [ ] UpdatePortfolioUseCase
     - [ ] RebalancePortfolioUseCase

3. [ ] API 레이어 구현
   - [ ] Echo 프레임워크 설정
   - [ ] 미들웨어 구현
     - [ ] 인증 미들웨어
     - [ ] 로깅 미들웨어
     - [ ] 에러 핸들링 미들웨어
   - [ ] API 엔드포인트 구현
     - [ ] Asset API
     - [ ] Transaction API
     - [ ] Portfolio API

## 우선순위 낮음 (P2)
1. [ ] 테스트 자동화
   - [ ] 테스트 헬퍼 구현
   - [ ] 통합 테스트 환경 구성
   - [ ] 성능 테스트 시나리오 작성

2. [ ] 문서화
   - [ ] API 문서 자동화 (Swagger)
   - [ ] 아키텍처 결정 기록 (ADR)
   - [ ] 개발 가이드 작성

3. [ ] 모니터링 시스템
   - [ ] 메트릭 수집 설정
   - [ ] 로깅 시스템 구축
   - [ ] 알림 시스템 구현

## 참고사항
- 각 작업은 LLM_ROLE.md의 가이드라인을 따라 진행
- 완료된 작업은 DONE.md로 이동
- 각 작업은 가능한 한 작은 단위로 분할하여 관리
- 모든 코드 변경은 lint 검사 필수

## MSA 전환 작업 (P0)

1. [ ] 공통 라이브러리 분리
- [ ] pkg 모듈 생성
- [ ] 기본 도메인 모델 이동
- [ ] Value Object 이동 (Money, TimeRange, Percentage)
- [ ] 공통 인터페이스 정의
- [ ] 의존성 관리
- [ ] go.mod 파일 생성
- [ ] 버전 관리 전략 수립
- [ ] 문서화
- [ ] 사용 가이드 작성
- [ ] 예제 코드 추가

2. [ ] 서비스 분리
- [ ] Asset 서비스
- [ ] 프로젝트 구조 설정
- [ ] go.mod 생성
- [ ] 도메인 로직 이전
- [ ] gRPC 인터페이스 정의
- [ ] Portfolio 서비스
- [ ] 프로젝트 구조 설정
- [ ] go.mod 생성
- [ ] 도메인 로직 이전
- [ ] gRPC 인터페이스 정의
- [ ] Transaction 서비스
- [ ] 프로젝트 구조 설정
- [ ] go.mod 생성
- [ ] 도메인 로직 이전
- [ ] gRPC 인터페이스 정의
- [ ] Gamification 서비스
- [ ] 프로젝트 구조 설정
- [ ] go.mod 생성
- [ ] 도메인 로직 이전
- [ ] gRPC 인터페이스 정의

3. [ ] 서비스 통신 구현
- [ ] Proto 파일 정의
- [ ] Asset 서비스 인터페이스
- [ ] Portfolio 서비스 인터페이스
- [ ] Transaction 서비스 인터페이스
- [ ] Gamification 서비스 인터페이스
- [ ] gRPC 서버 구현
- [ ] 에러 처리 표준화
- [ ] 미들웨어 구현
- [ ] 인터셉터 구현
- [ ] 서비스 디스커버리 연동
- [ ] Consul 설정
- [ ] 서비스 등록/해제 구현
- [ ] 헬스체크 구현

4. [ ] API 게이트웨이 구현
- [ ] 프로젝트 설정
- [ ] 기본 구조 정의
- [ ] go.mod 생성
- [ ] 의존성 설정
- [ ] 라우팅 구현
- [ ] 서비스별 라우팅 규칙
- [ ] 버전 관리
- [ ] 에러 처리
- [ ] 인증/인가
- [ ] JWT 구현
- [ ] 권한 관리
- [ ] 미들웨어 구현

5. [ ] 모니터링 시스템 구축
- [ ] 메트릭 수집
- [ ] Prometheus 설정
- [ ] 서비스별 메트릭 정의
- [ ] 알림 규칙 설정
- [ ] 로깅 시스템
- [ ] ELK 스택 구성
- [ ] 로그 포맷 표준화
- [ ] 로그 수집 파이프라인
- [ ] 분산 트레이싱
- [ ] Jaeger 설정
- [ ] 트레이스 ID 전파
- [ ] 성능 모니터링

6. [ ] 배포 환경 구성
- [ ] Docker 설정
- [ ] 서비스별 Dockerfile
- [ ] Docker Compose 파일
- [ ] 환경 변수 관리
- [ ] Kubernetes 설정
- [ ] 서비스 매니페스트
- [ ] ConfigMap/Secret 관리
- [ ] 배포 전략 수립
- [ ] CI/CD 파이프라인
- [ ] GitHub Actions 구성
- [ ] 테스트 자동화
- [ ] 배포 자동화
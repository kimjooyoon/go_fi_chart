# Go Financial Chart 테스트 전략

## 개요
이 문서는 Go Financial Chart 프로젝트의 테스트 전략과 방법론을 설명합니다. 프로젝트의 품질을 보장하고 안정적인 기능 개발을 지원하기 위한 테스트 접근 방식을 정의합니다.

## 테스트 계층

### 1. 단위 테스트
- **대상**: 개별 함수, 메서드, 도메인 모델
- **목적**: 코드 단위의 기능 검증
- **도구**: Go 표준 테스트 프레임워크
- **실행 방법**: `go test ./...` 또는 `make test`
- **작성 책임**: 개발자
- **범위**: 모든 패키지

### 2. 통합 테스트
- **대상**: 여러 컴포넌트 간 상호작용
- **목적**: 컴포넌트 간 통합 검증
- **도구**: Go 표준 테스트 프레임워크, Docker
- **실행 방법**: `make test-integration`
- **작성 책임**: 개발자
- **범위**: 저장소-도메인, API-도메인 통합

### 3. 서비스 테스트
- **대상**: 개별 마이크로서비스
- **목적**: 서비스 기능 검증
- **도구**: Go 표준 테스트 프레임워크
- **실행 방법**: `make test-services`
- **작성 책임**: 서비스 소유자
- **범위**: asset, portfolio, transaction, monitoring 서비스

### 4. 종단간 테스트
- **대상**: 전체 시스템
- **목적**: 사용자 시나리오 검증
- **도구**: Docker Compose, Postman
- **실행 방법**: `make test-e2e`
- **작성 책임**: QA 엔지니어
- **범위**: 주요 비즈니스 시나리오

## 테스트 자동화

### CI/CD 파이프라인
- GitHub Actions를 통한 자동화
- PR 생성 및 main 브랜치 푸시 시 테스트 실행
- 코드 커버리지 리포트 생성 및 Codecov 연동

### 테스트 실행 명령어
- `make test`: 모든 단위 테스트 실행
- `make test-services`: 서비스별 테스트 실행
- `make test-integration`: 통합 테스트 실행
- `make test-e2e`: 종단간 테스트 실행
- `make all`: 단위 테스트만 실행
- `make all-with-service-tests`: 단위 테스트 + 서비스 테스트 실행

## 테스트 우선순위
1. **핵심 도메인 로직**: 자산, 포트폴리오, 거래 처리 등 핵심 비즈니스 로직
2. **이벤트 처리**: 이벤트 발행, 구독, 처리 로직
3. **API 계약**: 외부 클라이언트와의 통신 인터페이스
4. **데이터 일관성**: 이벤트 소싱 기반 데이터 처리
5. **성능 임계치**: 시스템 성능 요구사항

## 테스트 데이터 관리
- 고정 테스트 데이터: 소스 코드 내 정의
- 동적 테스트 데이터: 테스트 실행 시 생성
- 테스트 데이터베이스: Docker 컨테이너로 실행

## 테스트 모니터링
- 코드 커버리지: Codecov
- 테스트 실행 시간: GitHub Actions 타임라인
- 테스트 안정성: 플레이키 테스트 모니터링

## 현재 진행 중인 테스트 작업
1. **Makefile 개선**: 테스트 중복 실행 문제 해결 완료
2. **서비스 테스트 강화**: 각 서비스별 테스트 케이스 확장 중
3. **통합 테스트 환경**: Docker Compose 기반 통합 테스트 환경 구축 중
4. **테스트 커버리지 향상**: 현재 평균 70% → 목표 85%

## 다음 단계
1. **속성 기반 테스트** 도입: 무작위 데이터 기반 테스트 강화
2. **카오스 테스트** 구현: 시스템 복원력 검증
3. **퍼포먼스 테스트** 자동화: 성능 회귀 방지 
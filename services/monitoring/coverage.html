<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>metrics: Go Coverage Report</title>
    <style>
        body {
            background: black;
            color: rgb(80, 80, 80);
        }

        body, pre, #legend span {
            font-family: Menlo, monospace;
            font-weight: bold;
        }

        #topbar {
            background: black;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 42px;
            border-bottom: 1px solid rgb(80, 80, 80);
        }

        #content {
            margin-top: 50px;
        }

        #nav, #legend {
            float: left;
            margin-left: 10px;
        }

        #legend {
            margin-top: 12px;
        }

        #nav {
            margin-top: 10px;
        }

        #legend span {
            margin: 0 5px;
        }

        .cov0 {
            color: rgb(192, 0, 0)
        }

        .cov1 {
            color: rgb(128, 128, 128)
        }

        .cov2 {
            color: rgb(116, 140, 131)
        }

        .cov3 {
            color: rgb(104, 152, 134)
        }

        .cov4 {
            color: rgb(92, 164, 137)
        }

        .cov5 {
            color: rgb(80, 176, 140)
        }

        .cov6 {
            color: rgb(68, 188, 143)
        }

        .cov7 {
            color: rgb(56, 200, 146)
        }

        .cov8 {
            color: rgb(44, 212, 149)
        }

        .cov9 {
            color: rgb(32, 224, 152)
        }

        .cov10 {
            color: rgb(20, 236, 155)
        }

    </style>
</head>
<body>
<div id="topbar">
    <div id="nav">
        <select id="files">

            <option value="file0">github.com/aske/go_fi_chart/services/monitoring/internal/metrics/collector.go
                (100.0%)
            </option>

            <option value="file1">github.com/aske/go_fi_chart/services/monitoring/pkg/health/checker.go (100.0%)
            </option>

        </select>
    </div>
    <div id="legend">
        <span>not tracked</span>

        <span class="cov0">not covered</span>
        <span class="cov8">covered</span>

    </div>
</div>
<div id="content">
		
		<pre class="file" id="file0" style="display: none">package metrics

import (
        "context"
        "sync"
        "time"
)

// MetricType 메트릭의 종류를 나타냅니다.
type MetricType string

const (
        TypeGauge   MetricType = "GAUGE"
        TypeCounter MetricType = "COUNTER"
)

// Metric 수집된 메트릭을 나타냅니다.
type Metric struct {
        Name      string            `json:"name"`
        Type      MetricType        `json:"type"`
        Value     float64           `json:"value"`
        Labels    map[string]string `json:"labels"`
        Timestamp time.Time         `json:"timestamp"`
}

// Collector 메트릭을 수집하는 인터페이스입니다.
type Collector interface {
        // Collect 메트릭을 수집합니다.
        Collect(ctx context.Context) ([]Metric, error)
}

// SimpleCollector 기본적인 메트릭 수집 구현체입니다.
type SimpleCollector struct {
        mu      sync.RWMutex
        metrics []Metric
}

// NewSimpleCollector 새로운 SimpleCollector를 생성합니다.
func NewSimpleCollector() *SimpleCollector <span class="cov8" title="1">{
        return &amp;SimpleCollector{
                metrics: make([]Metric, 0),
        }
}</span>

// Collect 현재 저장된 메트릭을 반환합니다.
func (c *SimpleCollector) Collect(_ context.Context) ([]Metric, error) <span class="cov8" title="1">{
        c.mu.RLock()
        defer c.mu.RUnlock()

        result := make([]Metric, len(c.metrics))
        copy(result, c.metrics)
        return result, nil
}</span>

// AddMetric 새로운 메트릭을 추가합니다.
func (c *SimpleCollector) AddMetric(metric Metric) <span class="cov8" title="1">{
        c.mu.Lock()
        defer c.mu.Unlock()

        metric.Timestamp = time.Now()
        c.metrics = append(c.metrics, metric)
}</span>

// Reset 저장된 메트릭을 초기화합니다.
func (c *SimpleCollector) Reset() <span class="cov8" title="1">{
        c.mu.Lock()
        defer c.mu.Unlock()

        c.metrics = make([]Metric, 0)
}</span>
</pre>

    <pre class="file" id="file1" style="display: none">package health

import (
        "context"
        "sync"
        "time"
)

// Status 서비스의 상태를 나타냅니다.
type Status string

const (
        StatusUp   Status = "UP"
        StatusDown Status = "DOWN"
)

// Check 헬스 체크 결과를 나타냅니다.
type Check struct {
        Status    Status    `json:"status"`
        Timestamp time.Time `json:"timestamp"`
        Error     string    `json:"error,omitempty"`
}

// Checker 서비스 상태를 체크하는 인터페이스입니다.
type Checker interface {
        // Check 현재 서비스의 상태를 확인합니다.
        Check(ctx context.Context) Check
}

// SimpleChecker 기본적인 상태 체크 구현체입니다.
type SimpleChecker struct {
        mu     sync.RWMutex
        status Status
        err    error
}

// NewSimpleChecker 새로운 SimpleChecker를 생성합니다.
func NewSimpleChecker() *SimpleChecker <span class="cov8" title="1">{
        return &amp;SimpleChecker{
                status: StatusUp,
        }
}</span>

// Check 현재 서비스의 상태를 반환합니다.
func (c *SimpleChecker) Check(_ context.Context) Check <span class="cov8" title="1">{
        c.mu.RLock()
        defer c.mu.RUnlock()

        var errStr string
        if c.err != nil </span><span class="cov8" title="1">{
                errStr = c.err.Error()
        }</span>

        <span class="cov8" title="1">return Check{
                Status:    c.status,
                Timestamp: time.Now(),
                Error:     errStr,
        }</span>
}

// SetStatus 서비스의 상태를 설정합니다.
func (c *SimpleChecker) SetStatus(status Status, err error) <span class="cov8" title="1">{
        c.mu.Lock()
        defer c.mu.Unlock()

        c.status = status
        c.err = err
}</span>
</pre>

</div>
</body>
<script>
    (function () {
        var files = document.getElementById('files');
        var visible;
        files.addEventListener('change', onChange, false);

        function select(part) {
            if (visible)
                visible.style.display = 'none';
            visible = document.getElementById(part);
            if (!visible)
                return;
            files.value = part;
            visible.style.display = 'block';
            location.hash = part;
        }

        function onChange() {
            select(files.value);
            window.scrollTo(0, 0);
        }

        if (location.hash != "") {
            select(location.hash.substr(1));
        }
        if (!visible) {
            select("file0");
        }
    })();
</script>
</html>
